<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AInwonderland</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <header class="glitch-wrapper">
        <h1 class="brand" data-text="AInwonderland">AInwonderland_</h1>
      </header>

      <main>
        <div class="manifesto-mini">
          <p>WE REJECT THE GRAY.</p>
          <p>BECOME A <span class="highlight">WUNDRIAN</span>.</p>
        </div>

        <div class="ticker-box">
          <div class="label">CURRENT E-MON VALUE</div>
          <div class="price" id="price-display">$...</div>
          <div class="sub-label">
            LAST MINT: <span class="blink">JUST NOW</span>
          </div>
        </div>

        <button id="buy-btn" class="ghost-btn">[ SECURE TOKEN ]</button>

        <div id="terminal-output" class="hidden">
          <p>> ACCESS GRANTED.</p>
          <p>> E-MON: <span class="token" id="token-slot"></span></p>
          <p>> <a href="#" class="discord-link">ENTER THE VOID (DISCORD)</a></p>
        </div>
      </main>
    </div>

    <script>
      const priceDisplay = document.getElementById("price-display");
      const buyBtn = document.getElementById("buy-btn");
      const output = document.getElementById("terminal-output");
      const tokenSlot = document.getElementById("token-slot");

      // SIMULATION MODE: Use LocalStorage instead of Server
      // This allows it to work on GitHub Pages without a backend

      function getSimulatedPrice() {
        let current = localStorage.getItem("wundrian_price");
        if (!current) {
          current = 1; // Start at $42
          localStorage.setItem("wundrian_price", current);
        }
        return parseInt(current);
      }

      function incrementSimulatedPrice() {
        let current = getSimulatedPrice();
        current++;
        localStorage.setItem("wundrian_price", current);
        return current;
      }

      // 1. Load Price
      async function updatePrice() {
        // Simulate API delay
        const price = getSimulatedPrice();
        priceDisplay.innerText = `$${price}.00`;
      }

      updatePrice();

      // 2. Buy Logic
      buyBtn.addEventListener("click", async () => {
        buyBtn.innerText = "PROCESSING...";
        buyBtn.disabled = true;

        // Simulate Network Delay (The "Hacking" feel)
        setTimeout(() => {
          const nextPrice = incrementSimulatedPrice();

          // Show the "E-mon"
          output.classList.remove("hidden");
          // Generate a random "glitch" string for the token
          const randomId = Math.random()
            .toString(36)
            .substr(2, 9)
            .toUpperCase();
          tokenSlot.innerText = `TOKEN_#${randomId}_GLITCH`;

          // Update price for the next "visit"
          priceDisplay.innerText = `$${nextPrice}.00`;

          buyBtn.innerText = "TOKEN SECURED";
          buyBtn.style.borderColor = "#00FF41"; // Green
          buyBtn.style.color = "#00FF41";
        }, 1500);
      });
    </script>
  </body>
</html>
